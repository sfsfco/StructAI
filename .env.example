# ═══════════════════════════════════════════════════════════════════════
#  StructAI – Environment Variables
# ═══════════════════════════════════════════════════════════════════════
#  Copy this file to .env and fill in real values.
#  NEVER commit .env to version control.
# ═══════════════════════════════════════════════════════════════════════

# ── App ──────────────────────────────────────────────────────────────────
APP_NAME=StructAI
APP_VERSION=0.1.0
DEBUG=false
LOG_LEVEL=INFO

# ── OpenAI (REQUIRED – external API) ────────────────────────────────────
# Obtain from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.0

# ── PostgreSQL ───────────────────────────────────────────────────────────
POSTGRES_USER=ai_user
POSTGRES_PASSWORD=ai_pass
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=ai_db

# ── Redis ────────────────────────────────────────────────────────────────
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_TTL=3600

# ── Celery (optional overrides — defaults derive from Redis settings) ───
# CELERY_BROKER_URL=redis://redis:6379/0
# CELERY_RESULT_BACKEND=redis://redis:6379/0

# ── FAISS ────────────────────────────────────────────────────────────────
FAISS_INDEX_DIR=/app/data/faiss
FAISS_DIMENSION=1536

# ── Document Processing ─────────────────────────────────────────────────
CHUNK_SIZE=512
CHUNK_OVERLAP=64

# ── Rate Limiting ────────────────────────────────────────────────────────
RATE_LIMIT_DEFAULT=60/minute
RATE_LIMIT_EXTRACT=10/minute

# ── Embedding Cache ─────────────────────────────────────────────────────
EMBEDDING_CACHE_TTL=86400

# ── Backpressure ────────────────────────────────────────────────────────
BACKPRESSURE_MAX_INFLIGHT=100
BACKPRESSURE_MAX_QUEUE_DEPTH=500

# ── Vector Store ────────────────────────────────────────────────────────
VECTOR_STORE_BACKEND=faiss

# ── Scaling (Production) ────────────────────────────────────────────────
API_WORKERS=4
WORKER_MAX_TASKS_PER_CHILD=100
WORKER_PREFETCH_MULTIPLIER=1

# ── Docker Compose Host Port Mapping (optional) ─────────────────────────
# Change these to avoid conflicts with services already on the host.
# API_PORT=8000
# PG_PORT=5432
# REDIS_PORT=6379
# FLOWER_PORT=5555
